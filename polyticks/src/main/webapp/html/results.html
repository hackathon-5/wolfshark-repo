<section id="profile" ng-controller="ResultsController" ng-if="currentUser">
	<div class="container">
		<div class="row">
			<div class="col-xs-12 col-sm-4 col-md-3 col-sm-push-1 col-md-push-2 user-profile">
				<div class="user-mugshot">
					<img ng-src="{{ currentUser.connection.imageUrl }}" />
				</div>

				<div class="user-name">{{ currentUser.user.fullName }}</div>
			</div>

			<div class="col-xs-12 col-sm-6 col-md-5 col-sm-push-1 col-md-push-2 user-dashboard">
				<div class="attributes-overview dashboard-panel">
					<h2>On the Issues</h2>
					
					<h5 class="liberal-key">Liberal</h5>
					<h5 class="conservative-key">Conservative</h5>

					<div class="attribute {{ category.name.toLowerCase() }} leaningByCategory[category.id].leaning" ng-repeat="category in categories">
						<h5>{{ category.name }}</h5>
						<div class="progress">
							<div class="progress-bar" role="progressbar" aria-valuenow="{{ leaningByCategory[category.id].percent }}"
								 aria-valuemin="0" aria-valuemax="100" style="width: {{ leaningByCategory[category.id].percent }}%;">
								<span class="data-display">{{ leaningByCategory[category.id].percent }}%</span>
							</div>
						</div>
					</div>
				</div>

				<div class="matches-overview dashboard-panel">
					<h2>Top Comparisons</h2>

					<div class="comparison">
						<h4>Presidents</h4>

						<div class="candidates">
							<div class="candidate" ng-repeat="candidate in candidates">
								<div class="candidate-chart" id="candidate_{{ $index }}"></div>
								<img ng-src="images/{{ candidate.id }}.jpg" />
								<h5>{{ candidate.fullName }} ({{ comparisonByCandidate[candidate.id].percent }}%)</h5>
							</div>
						</div>
						<script>
							new Chartist.Pie('#candidate_1', {
								series: [72, 64, 84, 36, 92, 52]
							}, {
								donut: true,
								donutWidth: 20,
								startAngle: 270,
								total: 0,
								showLabel: false
							});
							new Chartist.Pie('#candidate_2', {
								series: [84, 36, 92, 72, 64, 52]
							}, {
								donut: true,
								donutWidth: 20,
								startAngle: 270,
								total: 0,
								showLabel: false
							});
							new Chartist.Pie('#candidate_3', {
								series: [36, 92, 52, 72, 64, 84]
							}, {
								donut: true,
								donutWidth: 20,
								startAngle: 270,
								total: 0,
								showLabel: false
							});
						</script>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
